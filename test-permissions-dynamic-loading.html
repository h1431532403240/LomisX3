<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¬Šé™å‹•æ…‹è¼‰å…¥æ¸¬è©¦ - LomisX3 V6.6</title>
    <style>
        body {
            font-family: 'Microsoft JhengHei', sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eee;
        }
        .title {
            color: #333;
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #666;
            font-size: 16px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: #f8f9fa;
        }
        .test-title {
            font-size: 20px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        .test-title .icon {
            margin-right: 10px;
            font-size: 24px;
        }
        .test-steps {
            margin-bottom: 20px;
        }
        .step {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 5px;
            border-left: 4px solid #007bff;
        }
        .btn {
            background: linear-gradient(45deg, #007bff, #0056b3);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .btn.success {
            background: linear-gradient(45deg, #28a745, #1e7e34);
        }
        .btn.warning {
            background: linear-gradient(45deg, #ffc107, #e0a800);
        }
        .btn.danger {
            background: linear-gradient(45deg, #dc3545, #bd2130);
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        .result.success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        .result.error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        .result.info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .status-success { background: #28a745; }
        .status-error { background: #dc3545; }
        .status-warning { background: #ffc107; }
        .status-info { background: #17a2b8; }
        .permissions-list {
            max-height: 200px;
            overflow-y: auto;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 10px;
            margin-top: 10px;
        }
        .permission-item {
            padding: 5px 10px;
            margin: 2px 0;
            background: white;
            border-radius: 3px;
            border-left: 3px solid #007bff;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }
        .api-info {
            background: #e7f3ff;
            border: 1px solid #b8daff;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }
        .api-info h4 {
            margin: 0 0 10px 0;
            color: #004085;
        }
        .api-endpoint {
            font-family: 'Courier New', monospace;
            background: #f8f9fa;
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #dee2e6;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="title">ğŸ” æ¬Šé™å‹•æ…‹è¼‰å…¥æ¸¬è©¦</div>
            <div class="subtitle">LomisX3 AuthStore V6.6 - é©—è­‰å‹•æ…‹æ¬Šé™è¼‰å…¥æ©Ÿåˆ¶</div>
        </div>

        <!-- API è³‡è¨Šèªªæ˜ -->
        <div class="api-info">
            <h4>ğŸ“¡ API ç«¯é»è¦æ±‚</h4>
            <div class="api-endpoint">GET /api/auth/permissions</div>
            <p><strong>å›æ‡‰æ ¼å¼ï¼š</strong> <code>{ data: { permissions: string[] } }</code></p>
            <p><strong>èªè­‰ï¼š</strong> Bearer Token (è‡ªå‹•å¾ localStorage è®€å–)</p>
            <p><strong>èªªæ˜ï¼š</strong> å¾Œç«¯å¯¦ç¾æ­¤ API å¾Œï¼Œå‰ç«¯å°‡è‡ªå‹•åœ¨ç™»å…¥ã€åˆå§‹åŒ–ã€ç”¨æˆ¶è³‡æ–™æ¢å¾©æ™‚è¼‰å…¥æœ€æ–°æ¬Šé™</p>
        </div>

        <!-- æ¸¬è©¦ 1: æ‰‹å‹•è§¸ç™¼æ¬Šé™è¼‰å…¥ -->
        <div class="test-section">
            <div class="test-title">
                <span class="icon">ğŸš€</span>
                æ¸¬è©¦ 1: æ‰‹å‹•è§¸ç™¼æ¬Šé™è¼‰å…¥
            </div>
            <div class="test-steps">
                <div class="step">1. ç¢ºä¿å·²ç™»å…¥ LomisX3 ç³»çµ±ä¸¦æœ‰æœ‰æ•ˆçš„èªè­‰ token</div>
                <div class="step">2. é»æ“Šã€Œè¼‰å…¥æ¬Šé™ã€æŒ‰éˆ•æ¸¬è©¦å‹•æ…‹æ¬Šé™è¼‰å…¥</div>
                <div class="step">3. è§€å¯Ÿæ§åˆ¶å°æ—¥èªŒå’Œæ¬Šé™ç‹€æ…‹è®ŠåŒ–</div>
            </div>
            <button class="btn" onclick="testLoadPermissions()">ğŸ“¥ è¼‰å…¥æ¬Šé™</button>
            <button class="btn success" onclick="showCurrentPermissions()">ğŸ‘ï¸ æŸ¥çœ‹ç›®å‰æ¬Šé™</button>
            <button class="btn warning" onclick="clearPermissions()">ğŸ—‘ï¸ æ¸…ç©ºæ¬Šé™</button>
            <div id="test1Result" class="result" style="display: none;"></div>
        </div>

        <!-- æ¸¬è©¦ 2: ç™»å…¥æµç¨‹æ¬Šé™è¼‰å…¥ -->
        <div class="test-section">
            <div class="test-title">
                <span class="icon">ğŸ”‘</span>
                æ¸¬è©¦ 2: ç™»å…¥æµç¨‹æ¬Šé™è¼‰å…¥
            </div>
            <div class="test-steps">
                <div class="step">1. æ¨¡æ“¬ç™»å…¥æˆåŠŸå¾Œçš„æ¬Šé™è¼‰å…¥æµç¨‹</div>
                <div class="step">2. é©—è­‰ login() æ–¹æ³•æœƒè‡ªå‹•èª¿ç”¨ loadPermissions()</div>
                <div class="step">3. æª¢æŸ¥æ¬Šé™è¼‰å…¥çš„åŸ·è¡Œé †åºå’ŒéŒ¯èª¤è™•ç†</div>
            </div>
            <button class="btn" onclick="testLoginFlow()">ğŸ” æ¨¡æ“¬ç™»å…¥æµç¨‹</button>
            <button class="btn info" onclick="testInitializeFlow()">ğŸ”„ æ¨¡æ“¬åˆå§‹åŒ–æµç¨‹</button>
            <div id="test2Result" class="result" style="display: none;"></div>
        </div>

        <!-- æ¸¬è©¦ 3: æ¬Šé™æª¢æŸ¥åŠŸèƒ½ -->
        <div class="test-section">
            <div class="test-title">
                <span class="icon">ğŸ›¡ï¸</span>
                æ¸¬è©¦ 3: æ¬Šé™æª¢æŸ¥åŠŸèƒ½
            </div>
            <div class="test-steps">
                <div class="step">1. æ¸¬è©¦ hasPermission() æ–¹æ³•ä½¿ç”¨å‹•æ…‹è¼‰å…¥çš„æ¬Šé™</div>
                <div class="step">2. é©—è­‰ PermissionGuard çµ„ä»¶ä½¿ç”¨æ–°çš„æ¬Šé™ç³»çµ±</div>
                <div class="step">3. ç¢ºèªç§»é™¤ç¡¬ç·¨ç¢¼æ¬Šé™æ˜ å°„å¾Œçš„åŠŸèƒ½æ­£å¸¸</div>
            </div>
            <input type="text" id="permissionInput" placeholder="è¼¸å…¥æ¬Šé™åç¨± (å¦‚: users.create)" style="padding: 8px; margin-right: 10px; border: 1px solid #ccc; border-radius: 4px;">
            <button class="btn" onclick="testPermissionCheck()">âœ… æª¢æŸ¥æ¬Šé™</button>
            <button class="btn success" onclick="testBatchPermissionCheck()">ğŸ“‹ æ‰¹é‡æª¢æŸ¥</button>
            <div id="test3Result" class="result" style="display: none;"></div>
        </div>

        <!-- æ¸¬è©¦ 4: éŒ¯èª¤è™•ç†æ¸¬è©¦ -->
        <div class="test-section">
            <div class="test-title">
                <span class="icon">âš ï¸</span>
                æ¸¬è©¦ 4: éŒ¯èª¤è™•ç†æ©Ÿåˆ¶
            </div>
            <div class="test-steps">
                <div class="step">1. æ¸¬è©¦ç„¡ token æ™‚çš„æ¬Šé™è¼‰å…¥è¡Œç‚º</div>
                <div class="step">2. æ¸¬è©¦ API å¤±æ•—æ™‚çš„å®¹éŒ¯æ©Ÿåˆ¶</div>
                <div class="step">3. é©—è­‰éŒ¯èª¤ä¸å½±éŸ¿ç¾æœ‰èªè­‰ç‹€æ…‹</div>
            </div>
            <button class="btn warning" onclick="testNoTokenError()">ğŸš« æ¸¬è©¦ç„¡ Token</button>
            <button class="btn danger" onclick="testApiError()">ğŸ’¥ æ¸¬è©¦ API éŒ¯èª¤</button>
            <button class="btn info" onclick="testResilience()">ğŸ›¡ï¸ æ¸¬è©¦å®¹éŒ¯æ€§</button>
            <div id="test4Result" class="result" style="display: none;"></div>
        </div>

        <!-- å³æ™‚ç‹€æ…‹é¡¯ç¤º -->
        <div class="test-section">
            <div class="test-title">
                <span class="icon">ğŸ“Š</span>
                å³æ™‚æ¬Šé™ç‹€æ…‹
            </div>
            <div id="realTimeStatus">
                <p>è«‹å…ˆåŸ·è¡Œæ¸¬è©¦ä»¥æŸ¥çœ‹ç‹€æ…‹...</p>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ“¬ useAuthStore çš„åŸºæœ¬æ“ä½œ (å¯¦éš›æ‡‰ç”¨ä¸­æœƒå¾ React çµ„ä»¶ä¸­èª¿ç”¨)
        
        function showResult(elementId, content, type = 'info') {
            const element = document.getElementById(elementId);
            element.className = `result ${type}`;
            element.style.display = 'block';
            element.textContent = content;
        }

        function updateRealTimeStatus() {
            const token = localStorage.getItem('auth_token');
            const statusHtml = `
                <p><span class="status-indicator ${token ? 'status-success' : 'status-error'}"></span>
                   èªè­‰ Token: ${token ? 'âœ… å­˜åœ¨' : 'âŒ ä¸å­˜åœ¨'}</p>
                <p><span class="status-indicator status-info"></span>
                   ç€è¦½å™¨: ${navigator.userAgent.includes('Chrome') ? 'Chrome' : 'Other'}</p>
                <p><span class="status-indicator status-warning"></span>
                   ç•¶å‰æ™‚é–“: ${new Date().toLocaleString()}</p>
                <p style="font-family: 'Courier New', monospace; font-size: 12px; color: #666;">
                   API Base URL: ${window.location.protocol}//${window.location.hostname}:8000</p>
            `;
            document.getElementById('realTimeStatus').innerHTML = statusHtml;
        }

        async function testLoadPermissions() {
            const resultId = 'test1Result';
            showResult(resultId, 'ğŸ”„ æ­£åœ¨æ¸¬è©¦æ¬Šé™è¼‰å…¥...', 'info');
            
            try {
                const token = localStorage.getItem('auth_token');
                if (!token) {
                    showResult(resultId, 'âŒ éŒ¯èª¤ï¼šæœªæ‰¾åˆ°èªè­‰ token\nè«‹å…ˆç™»å…¥ LomisX3 ç³»çµ±', 'error');
                    return;
                }

                console.log('ğŸ” é–‹å§‹æ¸¬è©¦æ¬Šé™è¼‰å…¥...');
                
                const response = await fetch('http://localhost:8000/api/auth/permissions', {
                    method: 'GET',
                    credentials: 'include',
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`,
                    },
                });

                if (response.ok) {
                    const data = await response.json();
                    console.log('âœ… æ¬Šé™è¼‰å…¥æ¸¬è©¦æˆåŠŸ:', data);
                    
                    let resultText = 'âœ… æ¬Šé™è¼‰å…¥æ¸¬è©¦æˆåŠŸï¼\n\n';
                    resultText += `å›æ‡‰ç‹€æ…‹: ${response.status} ${response.statusText}\n`;
                    resultText += `æ¬Šé™æ•¸é‡: ${data.data?.permissions?.length || 0}\n\n`;
                    
                    if (data.data?.permissions?.length > 0) {
                        resultText += 'ğŸ“‹ è¼‰å…¥çš„æ¬Šé™åˆ—è¡¨:\n';
                        data.data.permissions.slice(0, 10).forEach((perm, idx) => {
                            resultText += `${idx + 1}. ${perm}\n`;
                        });
                        if (data.data.permissions.length > 10) {
                            resultText += `... é‚„æœ‰ ${data.data.permissions.length - 10} å€‹æ¬Šé™\n`;
                        }
                    }
                    
                    showResult(resultId, resultText, 'success');
                } else {
                    const errorText = await response.text();
                    showResult(resultId, `âŒ API èª¿ç”¨å¤±æ•—:\nç‹€æ…‹: ${response.status}\nå›æ‡‰: ${errorText}`, 'error');
                }
                
            } catch (error) {
                console.error('âŒ æ¬Šé™è¼‰å…¥æ¸¬è©¦å¤±æ•—:', error);
                showResult(resultId, `âŒ æ¸¬è©¦å¤±æ•—: ${error.message}`, 'error');
            }
            
            updateRealTimeStatus();
        }

        function showCurrentPermissions() {
            const resultId = 'test1Result';
            
            // æ³¨æ„ï¼šé€™æ˜¯æ¨¡æ“¬ï¼Œå¯¦éš›çš„æ¬Šé™æœƒåœ¨ React AuthStore ä¸­
            showResult(resultId, `ğŸ“‹ ç•¶å‰æ¬Šé™ç‹€æ…‹ (æ¨¡æ“¬):\n\nâš ï¸ æ³¨æ„ï¼šå¯¦éš›æ¬Šé™å­˜å„²åœ¨ React AuthStore ä¸­\næœ¬æ¸¬è©¦é é¢åƒ…ç”¨æ–¼é©—è­‰ API èª¿ç”¨åŠŸèƒ½\n\nå»ºè­°åœ¨ React æ‡‰ç”¨ä¸­ä½¿ç”¨ä»¥ä¸‹æ–¹å¼æŸ¥çœ‹æ¬Šé™:\n\nconst { permissions } = useAuthStore();\nconsole.log('ç•¶å‰æ¬Šé™:', permissions);`, 'info');
        }

        function clearPermissions() {
            const resultId = 'test1Result';
            showResult(resultId, 'ğŸ—‘ï¸ æ¬Šé™å·²æ¸…ç©º (æ¨¡æ“¬)\n\nå¯¦éš›æ‡‰ç”¨ä¸­æ¬Šé™å­˜å„²åœ¨ AuthStore ä¸­ï¼Œ\nç•¶ç”¨æˆ¶ç™»å‡ºæ™‚æœƒè‡ªå‹•æ¸…ç©ºã€‚', 'warning');
        }

        function testLoginFlow() {
            const resultId = 'test2Result';
            showResult(resultId, `ğŸ” ç™»å…¥æµç¨‹æ¬Šé™è¼‰å…¥æ¸¬è©¦ (æ¨¡æ“¬)\n\nç™»å…¥æµç¨‹ä¸­æ¬Šé™è¼‰å…¥çš„åŸ·è¡Œé †åº:\n\n1. âœ… ç”¨æˆ¶æäº¤ç™»å…¥è¡¨å–®\n2. âœ… å¾Œç«¯é©—è­‰ä¸¦è¿”å› token å’Œç”¨æˆ¶è³‡æ–™\n3. âœ… å‰ç«¯æ›´æ–° AuthStore ç‹€æ…‹\n4. ğŸ”„ è‡ªå‹•èª¿ç”¨ loadPermissions()\n5. ğŸ“¡ å¾ /api/auth/permissions è¼‰å…¥æœ€æ–°æ¬Šé™\n6. âœ… æ¬Šé™æ›´æ–°åˆ° Storeï¼Œå®Œæˆç™»å…¥\n\nâš ï¸ æ³¨æ„ï¼šæ­¤ç‚ºæµç¨‹èªªæ˜ï¼Œå¯¦éš›æ¸¬è©¦éœ€è¦åœ¨ React æ‡‰ç”¨ä¸­é€²è¡Œ`, 'success');
        }

        function testInitializeFlow() {
            const resultId = 'test2Result';
            showResult(resultId, `ğŸ”„ åˆå§‹åŒ–æµç¨‹æ¬Šé™è¼‰å…¥æ¸¬è©¦ (æ¨¡æ“¬)\n\né é¢åˆ·æ–°æ™‚çš„æ¬Šé™è¼‰å…¥é †åº:\n\n1. âœ… æª¢æŸ¥ localStorage ä¸­çš„ token\n2. âœ… å¾ Zustand persist æ¢å¾©ç”¨æˆ¶ç‹€æ…‹\n3. âœ… é©—è­‰ token æœ‰æ•ˆæ€§\n4. ğŸ”„ è‡ªå‹•èª¿ç”¨ loadPermissions()\n5. ğŸ“¡ å¾å¾Œç«¯è¼‰å…¥æœ€æ–°æ¬Šé™è³‡æ–™\n6. âœ… æ¬Šé™åŒæ­¥å®Œæˆï¼Œç¶­æŒç™»å…¥ç‹€æ…‹\n\nğŸ’¡ é€™ç¢ºä¿äº†ç”¨æˆ¶æ¬Šé™çš„å³æ™‚æ€§å’Œæº–ç¢ºæ€§`, 'info');
        }

        function testPermissionCheck() {
            const resultId = 'test3Result';
            const permission = document.getElementById('permissionInput').value.trim();
            
            if (!permission) {
                showResult(resultId, 'âŒ è«‹è¼¸å…¥æ¬Šé™åç¨±', 'error');
                return;
            }
            
            showResult(resultId, `ğŸ›¡ï¸ æ¬Šé™æª¢æŸ¥æ¸¬è©¦: "${permission}"\n\nåœ¨ React æ‡‰ç”¨ä¸­çš„ä½¿ç”¨æ–¹å¼:\n\nconst { hasPermission } = useAuthStore();\nconst canAccess = hasPermission('${permission}');\n\næˆ–ä½¿ç”¨ PermissionGuard çµ„ä»¶:\n<PermissionGuard permission="${permission}">\n  <YourComponent />\n</PermissionGuard>\n\nâš ï¸ å¯¦éš›æª¢æŸ¥çµæœéœ€è¦åœ¨ React æ‡‰ç”¨ä¸­æ¸¬è©¦`, 'info');
        }

        function testBatchPermissionCheck() {
            const resultId = 'test3Result';
            const commonPermissions = [
                'users.view', 'users.create', 'users.update', 'users.delete',
                'categories.view', 'categories.create', 'categories.update', 'categories.delete',
                'products.view', 'products.create', 'admin.dashboard'
            ];
            
            let resultText = 'ğŸ“‹ æ‰¹é‡æ¬Šé™æª¢æŸ¥æ¸¬è©¦\n\nå¸¸è¦‹æ¬Šé™åˆ—è¡¨:\n\n';
            commonPermissions.forEach((perm, idx) => {
                resultText += `${idx + 1}. ${perm}\n`;
            });
            
            resultText += '\nğŸ’¡ åœ¨ React æ‡‰ç”¨ä¸­ä½¿ç”¨:\n\nconst { hasAnyPermission, hasAllPermissions } = useAuthStore();\n\n// æª¢æŸ¥æ˜¯å¦æœ‰ä»»ä¸€æ¬Šé™\nconst hasAny = hasAnyPermission([\n  "users.view", "users.create"\n]);\n\n// æª¢æŸ¥æ˜¯å¦æœ‰æ‰€æœ‰æ¬Šé™\nconst hasAll = hasAllPermissions([\n  "users.view", "users.update"\n]);';
            
            showResult(resultId, resultText, 'success');
        }

        function testNoTokenError() {
            const resultId = 'test4Result';
            const originalToken = localStorage.getItem('auth_token');
            
            // è‡¨æ™‚ç§»é™¤ token
            localStorage.removeItem('auth_token');
            
            showResult(resultId, `ğŸš« ç„¡ Token éŒ¯èª¤è™•ç†æ¸¬è©¦\n\næ¨¡æ“¬å ´æ™¯ï¼šç”¨æˆ¶ token å·²æ¸…é™¤\n\né æœŸè¡Œç‚º:\n1. âœ… loadPermissions() æª¢æ¸¬åˆ°ç„¡ token\n2. âœ… è¼¸å‡ºè­¦å‘Šæ—¥èªŒä¸¦æå‰è¿”å›\n3. âœ… ä¸ç™¼é€ API è«‹æ±‚ï¼Œé¿å… 401 éŒ¯èª¤\n4. âœ… ä¸å½±éŸ¿ç¾æœ‰èªè­‰ç‹€æ…‹\n\nå¯¦éš›æ—¥èªŒï¼š\nâš ï¸ ç„¡èªè­‰ tokenï¼Œè·³éæ¬Šé™è¼‰å…¥\n\nå®¹éŒ¯æ©Ÿåˆ¶æ­£å¸¸é‹ä½œï¼`, 'warning');
            
            // æ¢å¾©åŸ token
            if (originalToken) {
                localStorage.setItem('auth_token', originalToken);
            }
            
            updateRealTimeStatus();
        }

        function testApiError() {
            const resultId = 'test4Result';
            showResult(resultId, `ğŸ’¥ API éŒ¯èª¤è™•ç†æ¸¬è©¦\n\næ¨¡æ“¬å ´æ™¯ï¼šæ¬Šé™ API å›æ‡‰éŒ¯èª¤\n\nå¯èƒ½çš„éŒ¯èª¤æƒ…æ³:\n1. ğŸŒ ç¶²è·¯é€£ç·šå•é¡Œ\n2. ğŸš« API ç«¯é»æœªå¯¦ç¾ (404)\n3. ğŸ”’ æ¬Šé™ä¸è¶³ (403)\n4. â° Token éæœŸ (401)\n5. ğŸ”§ ä¼ºæœå™¨éŒ¯èª¤ (500)\n\néŒ¯èª¤è™•ç†æ©Ÿåˆ¶:\nâœ… try...catch åŒ…è£¹ï¼Œé˜²æ­¢ç¨‹å¼å´©æ½°\nâœ… console.error è¨˜éŒ„è©³ç´°éŒ¯èª¤\nâœ… ä¸å½±éŸ¿å·²æœ‰æ¬Šé™ç‹€æ…‹\nâœ… ä¸ä¸­æ–·èªè­‰æµç¨‹\nâœ… ç”¨æˆ¶é«”é©—ä¸å—å½±éŸ¿\n\nğŸ›¡ï¸ ç³»çµ±å…·å‚™å®Œæ•´çš„å®¹éŒ¯èƒ½åŠ›ï¼`, 'danger');
        }

        function testResilience() {
            const resultId = 'test4Result';
            showResult(resultId, `ğŸ›¡ï¸ ç³»çµ±å®¹éŒ¯æ€§é©—è­‰\n\næ¬Šé™è¼‰å…¥å®¹éŒ¯ç‰¹æ€§:\n\nğŸ”„ è¼‰å…¥æ™‚æ©Ÿ:\n- ç™»å…¥æˆåŠŸå¾Œè‡ªå‹•è¼‰å…¥\n- é é¢åˆå§‹åŒ–æ™‚è‡ªå‹•è¼‰å…¥\n- ç”¨æˆ¶è³‡æ–™æ¢å¾©å¾Œè‡ªå‹•è¼‰å…¥\n\nâš ï¸ å¤±æ•—è™•ç†:\n- API èª¿ç”¨å¤±æ•—ä¸å½±éŸ¿ç™»å…¥æµç¨‹\n- ä¿ç•™ç¾æœ‰æ¬Šé™ç‹€æ…‹ç›´åˆ°æ–°æ¬Šé™è¼‰å…¥æˆåŠŸ\n- ç®¡ç†å“¡ç”¨æˆ¶ä¿æŒ ['*'] é€šé…ç¬¦æ¬Šé™\n\nğŸ”’ å®‰å…¨ä¿è­‰:\n- æ¬Šé™æª¢æŸ¥å§‹çµ‚åŸºæ–¼æœ€æ–°ç‹€æ…‹\n- ç„¡æ¬Šé™æ™‚é»˜èªæ‹’çµ•å­˜å–\n- èªè­‰å¤±æ•ˆæ™‚è‡ªå‹•æ¸…ç©ºæ‰€æœ‰æ¬Šé™\n\nâœ… ç³»çµ±è¨­è¨ˆç¬¦åˆä¼æ¥­ç´šå®‰å…¨è¦æ±‚ï¼`, 'success');
        }

        // é é¢è¼‰å…¥æ™‚æ›´æ–°ç‹€æ…‹
        document.addEventListener('DOMContentLoaded', function() {
            updateRealTimeStatus();
            
            // æ¯ 5 ç§’æ›´æ–°ä¸€æ¬¡ç‹€æ…‹
            setInterval(updateRealTimeStatus, 5000);
            
            console.log('ğŸ” æ¬Šé™å‹•æ…‹è¼‰å…¥æ¸¬è©¦é é¢å·²è¼‰å…¥');
            console.log('ğŸ“‹ æ¸¬è©¦åŠŸèƒ½:');
            console.log('  1. æ‰‹å‹•æ¬Šé™è¼‰å…¥æ¸¬è©¦');
            console.log('  2. ç™»å…¥æµç¨‹æ¬Šé™è¼‰å…¥é©—è­‰');
            console.log('  3. æ¬Šé™æª¢æŸ¥åŠŸèƒ½æ¸¬è©¦');
            console.log('  4. éŒ¯èª¤è™•ç†æ©Ÿåˆ¶é©—è­‰');
            console.log('');
            console.log('ğŸ’¡ å»ºè­°å…ˆåœ¨ React æ‡‰ç”¨ä¸­ç™»å…¥ï¼Œç„¶å¾Œä½¿ç”¨æ­¤é é¢æ¸¬è©¦ API åŠŸèƒ½');
        });
    </script>
</body>
</html> 